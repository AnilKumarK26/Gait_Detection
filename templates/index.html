<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Right Leg Detection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<div class="container">

    <!-- ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <header>
        <h1>ü¶µ Real-Time Right Leg Detection</h1>
        <p class="subtitle">MediaPipe Pose ¬∑ Selfie Segmentation ¬∑ Gait Metrics</p>
    </header>

    <!-- ‚îÄ‚îÄ‚îÄ MAIN GRID ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="main-content">

        <!-- ‚îÄ‚îÄ LEFT PANEL: controls ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <aside class="control-panel">

            <!-- Mode selector -->
            <section class="panel-section">
                <h3>Input Mode</h3>
                <div class="mode-buttons">
                    <button id="webcamBtn" class="mode-btn active" onclick="switchToWebcam()">üìπ Webcam</button>
                    <button id="uploadBtn" class="mode-btn"        onclick="showUpload()">üìÅ Upload</button>
                </div>
            </section>

            <!-- Upload area (hidden until Upload clicked) -->
            <section class="upload-section" id="uploadSection" style="display:none;">
                <h3>Upload Image / Video</h3>
                <div class="file-upload">
                    <input type="file" id="fileInput" accept="image/*,video/*" onchange="handleFileUpload(event)">
                    <label for="fileInput" class="upload-label">
                        <span id="fileName">Choose file‚Ä¶</span>
                    </label>
                </div>
                <div id="uploadStatus" class="upload-status" style="display:none;"></div>
            </section>

            <!-- Legend -->
            <section class="panel-section">
                <h3>üé® Legend</h3>
                <div class="legend-item">
                    <span class="color-box" style="background:#64C8FF;"></span>
                    <span>Right Leg (highlighted)</span>
                </div>
                <div class="legend-item">
                    <span class="color-box" style="background:#3c3c3c; border:1px solid #555;"></span>
                    <span>Rest of Body (silhouette)</span>
                </div>
                <div class="legend-item">
                    <span class="color-box" style="background:#000; border:1px solid #555;"></span>
                    <span>Background</span>
                </div>
            </section>

            <!-- Info -->
            <section class="panel-section">
                <h3>‚ÑπÔ∏è Info</h3>
                <ul class="info-list">
                    <li><strong>Pose:</strong> MediaPipe (model complexity 1)</li>
                    <li><strong>Segmentation:</strong> Selfie Seg (single pass / frame)</li>
                    <li><strong>Smoothing:</strong> EMA temporal filter</li>
                    <li><strong>Max FPS:</strong> 30</li>
                </ul>
            </section>
        </aside>

        <!-- ‚îÄ‚îÄ RIGHT PANEL: video + gait data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <main class="video-container">

            <!-- Video feed -->
            <div class="video-wrapper">
                <img id="videoFeed" src="{{ url_for('video_feed') }}" alt="Video Feed">
                <div class="video-overlay">
                    <span id="statusIndicator" class="status-indicator active">‚óè LIVE</span>
                </div>
            </div>

            <!-- Controls -->
            <div class="video-controls">
                <button class="control-btn" onclick="startDetection()">‚ñ∂Ô∏è Start</button>
                <button class="control-btn" onclick="stopDetection()">‚è∏Ô∏è Stop</button>
                <button class="control-btn" onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
            </div>

            <!-- Live gait data panel -->
            <section class="gait-panel" id="gaitPanel">
                <h3>üìä Gait Data</h3>
                <div class="gait-grid">
                    <div class="gait-card">
                        <span class="gait-label">Confidence</span>
                        <span class="gait-value" id="gaitConfidence">‚Äî</span>
                    </div>
                    <div class="gait-card">
                        <span class="gait-label">Knee Angle</span>
                        <span class="gait-value" id="gaitKnee">‚Äî</span>
                    </div>
                    <div class="gait-card">
                        <span class="gait-label">Scale Factor</span>
                        <span class="gait-value" id="gaitScale">‚Äî</span>
                    </div>
                    <div class="gait-card">
                        <span class="gait-label">Stride Count</span>
                        <span class="gait-value" id="gaitStride">‚Äî</span>
                    </div>
                    <div class="gait-card">
                        <span class="gait-label">Timestamp</span>
                        <span class="gait-value" id="gaitTime">‚Äî</span>
                    </div>
                    <div class="gait-card">
                        <span class="gait-label">Status</span>
                        <span class="gait-value" id="gaitStatus">waiting‚Ä¶</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <footer>
        <p>Built with MediaPipe ¬∑ OpenCV ¬∑ Flask &nbsp;|&nbsp; Temporal smoothing ¬∑ Gait metrics</p>
    </footer>
</div>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>